CREATE TABLE `history_tm_submissions` (
  `historyID` bigint(20) NOT NULL AUTO_INCREMENT,
  `ID` bigint(20) NOT NULL,
  `idUser` bigint(20) NOT NULL,
  `idPlatform` bigint(20) NOT NULL,
  `idTask` bigint(20) NOT NULL COMMENT 'Problem''s ID',
  `sDate` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `idSourceCode` bigint(20) NOT NULL,
  `bManualCorrection` tinyint(4) NOT NULL DEFAULT '0',
  `bSuccess` tinyint(4) NOT NULL DEFAULT '0',
  `nbTestsTotal` int(11) NOT NULL DEFAULT '0',
  `nbTestsPassed` int(11) NOT NULL DEFAULT '0',
  `iScore` int(11) NOT NULL DEFAULT '0',
  `bCompilError` tinyint(4) NOT NULL DEFAULT '0',
  `sCompilMsg` mediumtext,
  `sErrorMsg` mediumtext,
  `sFirstUserOutput` mediumtext,
  `sFirstExpectedOutput` mediumtext,
  `sManualScoreDiffComment` varchar(255) DEFAULT NULL,
  `bEvaluated` tinyint(4) NOT NULL DEFAULT '0',
  `bConfirmed` tinyint(4) NOT NULL DEFAULT '0' COMMENT '0 when saved for getAnswer, 1 once the grade process starts',
  `sMode` enum('Submitted','LimitedTime','Contest','UserTest') NOT NULL DEFAULT 'Submitted',
  `sReturnUrl` varchar(255) DEFAULT NULL,
  `iChecksum` int(11) NOT NULL DEFAULT '0',
  `iVersion` int(11) NOT NULL,
  `iNextVersion` int(11) DEFAULT NULL,
  `bDeleted` tinyint(1) NOT NULL,
  PRIMARY KEY (`historyID`),
  KEY `iVersion` (`iVersion`),
  KEY `iNextVersion` (`iNextVersion`),
  KEY `bDeleted` (`bDeleted`),
  KEY `checksum` (`iChecksum`),
  KEY `date` (`sDate`),
  KEY `user` (`idUser`,`idPlatform`),
  KEY `idTask` (`idTask`),
  KEY `userTask` (`idTask`,`idUser`,`idPlatform`),
  KEY `idSourceCode` (`idSourceCode`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8

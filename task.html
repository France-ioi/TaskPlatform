<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>France IOI Task Platform</title>
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" type="text/css" rel="stylesheet">
    <link href="bower_components/submission-manager/dst/submission-manager.min.css" type="text/css" rel="stylesheet">
    <style type="text/css">*[ng-cloak] { display: none !important; }</style>
    <script type="text/javascript" src="../bower_components/requirejs/require.js"></script>
    <script type="text/javascript">
requirejs.config({
  "paths": {
    "ace": "bower_components/ace-builds/src-min-noconflict/ace",
    "angular": "bower_components/angular/angular.min",
    "angular-bootstrap": "bower_components/angular-bootstrap/ui-bootstrap.min",
    "angular-bootstrap-tpls": "bower_components/angular-bootstrap/ui-bootstrap-tpls.min",
    "angular-ui-ace": "bower_components/angular-ui-ace/ui-ace.min",
    "bootstrap": "bower_components/bootstrap/dist/js/bootstrap.min",
    "es5-shim": "bower_components/es5-shim/es5-shim.min",
    "fioi-editor2": "bower_components/fioi-editor2/dist/fioi-editor2.min",
    "jquery": "bower_components/jquery/dist/jquery.min",
    "lodash": "bower_components/lodash/lodash.min",
    "platform-pr": "bower_components/pem-task/platform-pr",
    "raphael": "bower_components/raphael/raphael-min",
    "submission-manager": "bower_components/submission-manager/dst/submission-manager.min",
    "SoundManager2": "bower_components/SoundManager2/script/soundmanager2-jsmin"
  },
  "shim": {
    "angular": {"exports": "angular"},
    "angular-bootstrap": {"deps": ["angular"]},
    "angular-bootstrap-tpls": {"deps": ["angular-bootstrap"]},
    "angular-ui-ace": {"deps": ["angular", "ace"]},
    "bootstrap": {"deps": ["jquery"]},
    "jquery-ui": {"deps": ["jquery"]},
    "platform-pr": {"deps": ["jquery"]},
    "submission-manager": {"deps": ["jquery", "raphael", "angular", "bootstrap"]},
  }
});
require([
  'angular', 'angular-bootstrap', 'angular-bootstrap-tpls', 'angular-ui-ace',
  'es5-shim', 'fioi-editor2', 'jquery', 'lodash', 'raphael', 'SoundManager2',
  'platform-pr', 'submission-manager'
], function (angular) {

  // TODO: proper handling in url
  window.sToken = '';
  window.sPlatform = 'http://algorea.pem.dev';

  var scripts = [
    "pem-api",
    "commonFramework/modelsManager/modelsManager",
    "shared/models",
    "commonFramework/sync/syncQueue",
    "taskController" // defines the 'pemTask' angular module
  ];
  !function loadNext () {
    if (scripts.length > 0)
      return require([scripts.shift()], loadNext);
    angular.element(document).ready(function () {
      angular.bootstrap(document, ['pemTask'], {strictDi: true});
    });
  }();

});
    </script>
  </head>
  <body ng-cloak ng-controller="taskController">
   <div id="editor">
     <div fioi-editor2="{tabset: 'sources'}"></div>
     <button ng-click="saveEditors();">Sauvegarder les codes et les exemples</button>
     <button ng-click="submitAnswer();">Soumettre la réponse courante</button>
   </div>
   <div id="submission">
      <div ng-if="!submission">Vous n'avez pas soumis de réponse à cet exercice</div>
      <div ng-if="submission" ng-controller="submissionController" ng-include="'submission-manager/submission.html'"></div>
   </div>
  </body>
</html>

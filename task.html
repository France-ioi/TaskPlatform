<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>France IOI Task Platform</title>
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" type="text/css" rel="stylesheet">
    <link href="bower_components/submission-manager/dst/submission-manager.min.css" type="text/css" rel="stylesheet">
    <style type="text/css">*[ng-cloak] { display: none !important; }</style>
    <script type="text/javascript" src="config.js.php"></script>
    <script type="text/javascript" src="bower_components/requirejs/require.js"></script>
    <script type="text/javascript">
requirejs.config({
  "paths": {
    "ace": "bower_components/ace-builds/src-min-noconflict/ace",
    "angular": "bower_components/angular/angular.min",
    "angular-bootstrap": "bower_components/angular-bootstrap/ui-bootstrap.min",
    "angular-bootstrap-tpls": "bower_components/angular-bootstrap/ui-bootstrap-tpls.min",
    "angular-bind-html-compile": "bower_components/angular-bind-html-compile/angular-bind-html-compile",
    "angular-ui-ace": "bower_components/angular-ui-ace/ui-ace.min",
    "bootstrap": "bower_components/bootstrap/dist/js/bootstrap.min",
    "es5-shim": "bower_components/es5-shim/es5-shim.min",
    "fioi-editor2": "bower_components/fioi-editor2/dist/fioi-editor2.min",
    "jquery": "bower_components/jquery/dist/jquery.min",
    "lodash": "bower_components/lodash/lodash.min",
    "platform-pr": "bower_components/pem-task/platform-pr",
    "raphael": "bower_components/raphael/raphael-min",
    "jschannel": "bower_components/jschannel/src/jschannel",
    "submission-manager": "bower_components/submission-manager/dst/submission-manager.min",
    "SoundManager2": "bower_components/SoundManager2/script/soundmanager2-jsmin",
    "transloadit_xhr": "bower_components/transloadit_xhr/transloadit_xhr"
  },
  "shim": {
    "angular": {"exports": "angular"},
    "angular-bind-html-compile": {"deps": ["angular"]},
    "angular-bootstrap": {"deps": ["angular"]},
    "angular-bootstrap-tpls": {"deps": ["angular-bootstrap"]},
    "angular-ui-ace": {"deps": ["angular", "ace"]},
    "bootstrap": {"deps": ["jquery"]},
    "platform-pr": {"deps": ["jquery", "jschannel"]},
    "submission-manager": {"deps": ["jquery", "raphael", "angular", "bootstrap"]},
    "transloadit_xhr": {"deps": ["jquery"]}
  }
});
require([
  'angular', 'angular-bootstrap', 'angular-bootstrap-tpls', 'angular-ui-ace',
  'es5-shim', 'fioi-editor2', 'jquery', 'lodash', 'raphael', 'SoundManager2',
  'jschannel', 'platform-pr', 'submission-manager', 'angular-bind-html-compile',
  'transloadit_xhr'
], function (angular) {

  var scripts = [
    "commonFramework/modelsManager/modelsManager",
    "shared/models",
    "commonFramework/sync/syncQueue",
    "taskController",
    "pem-api",
    "showSource",
    "record/recordController",
    "miniPlatform",
  ];
  !function loadNext () {
    if (scripts.length > 0)
      return require([scripts.shift()], loadNext);
    angular.element(document).ready(function () {
      angular.bootstrap(document, ['pemTask'], {strictDi: true});
    });
  }();

});
    </script>
    <style>
      .readOnlySource .ace_cursor {
         border-left:0px;
      }
      body {
        margin-top:20px;
        width: 764px;
        margin-right: auto;
        margin-left: auto;
      }
      #choose-view {
        margin-left:auto;
        margin-right: auto;
        margin-bottom: 40px;
        font-size:14pt;
      }
      #sourcesEditor {
         margin-bottom:20px;
      }
      #testsEditor {
         margin-bottom:20px;
      }
      #submission {
         margin-top: 25px;
      }
    </style>
  </head>
  <body ng-cloak ng-controller="taskController">
    <div id="task">
       <div  bind-html-compile="taskContent"></div>
    </div>
    <div id="editor">
      <div style="margin: 10px 0;" class="clearfix toolbar" ng-include="'record/controls.html'" ng-controller="recordController"></div>
      <div id="sourcesEditor">
        <div fioi-editor2="{tabset: 'sources'}"></div>
      </div>
      <div id="testsEditor" ng-if="tm_task.bUserTests">
        <div fioi-editor2="{tabset:'tests'}"></div>
      </div>
      <button ng-click="saveEditors();" ng-if="mode=='normal'" class="btn btn-default">Sauvegarder les codes<span ng-if="tm_task.bUserTests"> et les tests</span></button><br>
      <button ng-click="validateAnswer();" ng-if="tm_task.bIsEvaluable" class="btn btn-default">Valider la réponse</button>
      <button ng-click="runCurrentTest();" ng-if="tm_task.bUserTests" class="btn btn-default">Essayer sur le test courant</button>
      <button ng-click="runAllTests();" ng-if="tm_task.bUserTests" class="btn btn-default">Essayer sur tous les tests</button>
      <div ng-if="mode == 'record'" ng-include="'record/recordingsList.html'" ng-controller="recordController"></div>
    </div>
    <div id="submission">
      <div ng-if="!submission">Vous n'avez pas soumis de réponse à cet exercice</div>
      <div ng-if="submission" ng-controller="submissionController" ng-include="'submission-manager/submission.html'"></div>
    </div>
    <div id="solution" ng-bind-html="solutionContent">
    </div>
  </body>
</html>
